<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css')}}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='customCarousel.css')}}">
	<title>Gözlük Tavsiye Sistemi</title>
</head>
<body>
	
<div class="container-lg mb-5">	
	<div class="alert alert-info" role="alert">
		<a class="top-links" href="/">Ana Sayfa / </a>
		<a class="top-links" href="/products">Tüm Gözlükler</a>
		<a style="float:right" onclick="deleteCookies()" class="logout top-links" href="#">Çıkış yap</a>
		{% if gender is defined %}<a class="top-links" href="/products?gender={{gender}}"> / {{gender}}</a>{% endif %}
		{% if frame is defined %}<a class="top-links" href="/products?gender={{gender}}&frame={{frame}}"> / {{frame}}</a>{% endif %}
	</div>
	{% if gender is defined %}
		<center class="mt-5"><h1>{{ gender }} Güneş Gözlükleri</h1></center>
		{% if frame is defined %}
			<center class="mt-2"><h5 class="text-muted">Size özel {{ frame.lower() }} gözlükler</h5></center>
		{% else %}
			<center class="mt-2"><h5 class="text-muted">Her mevsim kullanabileceğiniz şık gözlükler...</h5></center>
		{% endif %}
	{% else %}
		<center class="mt-5"><h1>Tüm Güneş Gözlüğü Modelleri</h1></center>
		<center class="mt-2"><h5 class="text-muted">Her mevsim kullanabileceğiniz şık gözlükler...</h5></center>
	{% endif %}
	<div style="margin-left: 0px !important; margin-right:0px !important;" class="row">
		<div class="col-2 filter-products mt-5 w-100">
	    	
<div class="card">
<form action="/products" method="post">
	<article class="card-group-item">
		<header class="card-header">
			<h6 class="title">Tahmin Algoritması</h6>
		</header>
		<div class="filter-content">
			<div class="card-body">
				<div class="custom-control custom-radio">
				  	<input type="radio" name="predictAlgorithm" class="custom-control-input" value="1" id="1">
				  	<label class="custom-control-label" for="1">SVD</label>
				</div> <!-- form-check.// -->
				<div class="custom-control custom-radio">
				  	<input type="radio" name="predictAlgorithm" class="custom-control-input" value="2" id="2">
				  	<label class="custom-control-label" for="2">SlopeOne</label>
				</div> <!-- form-check.// -->
				<div class="custom-control custom-radio">
				  	<input type="radio" name="predictAlgorithm" class="custom-control-input" value="3" id="3">
				  	<label class="custom-control-label" for="3">NMF</label>
				</div> <!-- form-check.// -->
				<div class="custom-control custom-radio">
					<input type="radio" name="predictAlgorithm" class="custom-control-input" value="4" id="4">
					<label class="custom-control-label" for="4">NormalPredictor</label>
				</div> <!-- form-check.// -->
				<div class="custom-control custom-radio">
					<input type="radio" name="predictAlgorithm" class="custom-control-input" value="5" id="5">
					<label class="custom-control-label" for="5">KNNBaseline</label>
				</div> <!-- form-check.// -->
				<div class="custom-control custom-radio">
					<input type="radio" name="predictAlgorithm" class="custom-control-input" value="6" id="6">
					<label class="custom-control-label" for="6">KNNBasic</label>
				</div> <!-- form-check.// -->  
				<div class="custom-control custom-radio">
					<input type="radio" name="predictAlgorithm" class="custom-control-input" value="7" id="7">
					<label class="custom-control-label" for="7">KNNWithMeans</label>
				</div> <!-- form-check.// -->  
				<div class="custom-control custom-radio">
					<input type="radio" name="predictAlgorithm" class="custom-control-input" value="8" id="8">
					<label class="custom-control-label" for="8">KNNWithZScore</label>
				</div> <!-- form-check.// -->  
				<div class="custom-control custom-radio">
					<input type="radio" name="predictAlgorithm" class="custom-control-input" value="9" id="9">
					<label class="custom-control-label" for="9">BaselineOnly</label>
				</div> <!-- form-check.// -->  
				<div class="custom-control custom-radio">
					<input type="radio" name="predictAlgorithm" class="custom-control-input" value="10" id="10">
					<label class="custom-control-label" for="10">CoClustering</label>
				</div> <!-- form-check.// -->  
			</div> <!-- card-body.// -->
		</div>
	</article> <!-- card-group-item.// -->
	<article class="card-group-item">
		<header class="card-header">
			<h6 class="title">Benzerlik Yöntemi</h6>
		</header>
		<div class="filter-content">
			<div class="card-body">
				<div class="custom-control custom-radio">
				  	<input type="radio" name="similarityMeasure" class="custom-control-input" value="1" id="11">
				  	<label class="custom-control-label" for="11">Cosine</label>
				</div> <!-- form-check.// -->
				<div class="custom-control custom-radio">
				  	<input type="radio" name="similarityMeasure" class="custom-control-input" value="2" id="12">
				  	<label class="custom-control-label" for="12">Pearson</label>
				</div> <!-- form-check.// -->
				<div class="custom-control custom-radio">
				  	<input type="radio" name="similarityMeasure" class="custom-control-input" value="3" id="13">
				  	<label class="custom-control-label" for="13">Pearson Baseline</label>
				</div> <!-- form-check.// -->
			</div> <!-- card-body.// -->
		</div>
	</article> <!-- card-group-item.// -->
	<article class="card-group-item">
		<header class="card-header">
			<h6 class="title">Benzerlik Türü</h6>
		</header>
		<div class="filter-content">
			<div class="card-body">
				<div class="custom-control custom-radio">
				  	<input type="radio" name="isUserBased" class="custom-control-input" value="Yes" id="Yes">
				  	<label class="custom-control-label" for="Yes">Kullanıcı - Kullanıcı</label>
				</div> <!-- form-check.// -->
				<div class="custom-control custom-radio">
				  	<input type="radio" name="isUserBased" class="custom-control-input" value="No" id="No">
				  	<label class="custom-control-label" for="No">Ürün - Ürün</label>
				</div> <!-- form-check.// -->
			</div> <!-- card-body.// -->
		</div>
	</article> <!-- card-group-item.// -->
	<article class="card-group-item">
		<header class="card-header">
			<h6 class="title">Cinsiyet</h6>
		</header>
		<div class="filter-content">
			<div class="card-body">
				{% for gender in genderList %}
				<div class="custom-control custom-checkbox">
				  	<input type="checkbox" name="gender" class="custom-control-input" value="{{gender}}" id="{{gender}}">
				  	<label class="custom-control-label" for="{{gender}}">{{gender}}</label>
				</div> <!-- form-check.// -->
				{% endfor %}
			</div> <!-- card-body.// -->
		</div>
	</article> <!-- card-group-item.// -->
	<article class="card-group-item">
		<header class="card-header">
			<h6 class="title">Marka</h6>
		</header>
		<div class="filter-content">
			<div style="height: 300px; overflow-y: scroll" class="card-body">
				{% for brand in brandList %}
				<div class="custom-control custom-checkbox">
				  	<input type="checkbox" name="brand" class="custom-control-input" value="{{brand}}" id="{{brand}}">
				  	<label class="custom-control-label" for="{{brand}}">{{brand}}</label>
				</div> <!-- form-check.// -->
				{% endfor %}
			</div> <!-- card-body.// -->
		</div>
	</article> <!-- card-group-item.// -->
	<article class="card-group-item">
		<header class="card-header">
			<h6 class="title">Çerçeve Şekli</h6>
		</header>
		<div class="filter-content">
			<div class="card-body">
				{% for frame in frameList %}
				<div class="custom-control custom-checkbox">
				  	<input type="checkbox" name="frame" class="custom-control-input" value="{{frame}}" id="{{frame}}">
				  	<label class="custom-control-label" for="{{frame}}">{{frame}}</label>
				</div> <!-- form-check.// -->
				{% endfor %}
				<input type="submit" value="Filtrele" class="btn btn-primary mt-3 w-100"></input>
			</div> <!-- card-body.// -->
		</div>
	</article> <!-- card-group-item.// -->
</form>
</div> <!-- card.// -->

	    </div>
	    <div class="col">
		    {% if (glasses is defined) and glasses.items[0] is defined %}
		    <div style="margin-left: 0px !important; margin-right:0px !important;" class="row w-100 mt-5 pl-5 pr-5 justify-content-center">                  
	          	<!-- Top content -->
				<div class="top-content">
					<center style="margin-bottom: 2rem !important;" class="text-dark"><h2>Tavsiye Edilen Gözlükler{% if rmseValue is defined %} - RMSE: {{rmseValue}}</h2>{% endif %}</center>
				    <div class="container-fluid">
				        <div id="carousel-example" class="carousel slide" data-ride="carousel">
				            <div class="carousel-inner row w-100 mx-auto" role="listbox">
		            	    {% if (recommendations is defined) and recommendations[0] is defined %}
		            	    	<div class="carousel-item col-12 col-sm-6 col-md-4 col-lg-3 active">
				                    <div style="height: 100% !important" class="card text-center">
										<a href="/detail/{{recommendations[0].glassID}}">
											<div class="img-box">
												<img class="card-img-top" src="{{recommendations[0].image}}" alt="{{recommendations[0].brand}}">
										  		 <div class="overlay">
													<img src="{{recommendations[0].image2}}">
												</div>
											</div>
										</a>
										  <div class="d-flex flex-column card-body">
										  	<center><img class="brandImg2" src="{{recommendations[0].brandImg}}"></center>
											<p class="card-text">{{recommendations[0].model}}</p>
											<a href="/detail/{{recommendations[0].glassID}}" class="mt-auto btn btn-primary w-100">Detaylar</a>
										  </div>
									</div>
				                </div>
		                 		{% for product in recommendations[1:] %}
				                <div class="carousel-item col-12 col-sm-6 col-md-4 col-lg-3">
				                    <div style="height: 100% !important" class="card text-center">
										<a href="/detail/{{product.glassID}}">
											<div class="img-box">
												<img class="card-img-top" src="{{product.image}}" alt="{{product.brand}}">
										  		 <div class="overlay">
													<img src="{{product.image2}}">
												</div>
											</div>
										</a>
										  <div class="d-flex flex-column card-body">
										  	<center><img class="brandImg2" src="{{product.brandImg}}"></center>
											<p class="card-text">{{product.model}}</p>
											<a href="/detail/{{product.glassID}}" class="mt-auto btn btn-primary w-100">Detaylar</a>
										  </div>
									</div>
				                </div>
				                	{% endfor %}
								{% endif %}
				            
				            </div>
				            <a class="carousel-control-prev" href="#carousel-example" role="button" data-slide="prev">
				                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
				                <span class="sr-only">Previous</span>
				            </a>
				            <a class="carousel-control-next" href="#carousel-example" role="button" data-slide="next">
				                <span class="carousel-control-next-icon" aria-hidden="true"></span>
				                <span class="sr-only">Next</span>
				            </a>
				        </div>
				    </div>
				</div>   
	    	</div>
	    	{% endif %}
	    	{% if (glasses is defined) and glasses.items[0] is defined %}
	    	<div style="margin-left: 0px !important; margin-right:0px !important;" class="row">
				{% for glass in glasses.items %}
				<div class="col d-flex align-items-stretch justify-content-center mt-5">
					<div class="card text-center card-300">
					<a href="/detail/{{glass.glassID}}">
						<div class="img-box">
							<img class="card-img-top" src="{{glass.image}}" alt="{{glass.brand}}">
					  		 <div class="overlay">
								<img src="{{glass.image2}}">
							</div>
						</div>
					</a>
					  <div class="d-flex flex-column card-body">
					  	<center><img class="brandImg2" src="{{glass.brandImg}}"/></center>
						<h5 class="card-title">{{glass.brand}}</h5>
						<p class="card-text">{{glass.model}}</p>
						<a href="/detail/{{glass.glassID}}" class="mt-auto btn btn-primary w-100">Detaylar</a>
					  </div>
					</div>
				</div>
				{% endfor %}
			</div>
			<nav class="mt-4 pagination-margin-left" aria-label="Page navigation example">
			  <ul style="color:#007bff !important;" class="pagination">
			  	{% if glasses.page > 2 %}
			  		<li class="page-item"><a class="page-link" onclick="setGetParameter('page','1')">1</a></li>
			  		<li class="page-item"><a class="page-link" onclick="setGetParameter('page','{{glasses.page - 1}}')">{{glasses.page - 1}}</a></li>
			  	{% elif glasses.page == 2 %}
			  		<li class="page-item"><a class="page-link" onclick="setGetParameter('page','1')">1</a></li>
			  	{% endif %}
			    {% if totalPage > 3 %}<li class="page-item"><a class="page-link" onclick="setGetParameter('page','{{glasses.page}}')">{{glasses.page}}</a></li>{% endif %}
			   	{% if glasses.page < totalPage-1 %}<li class="page-item"><a class="page-link" onclick="setGetParameter('page','{{glasses.page + 1}}')">{{glasses.page + 1}}</a></li>{% endif %}
			  	{% if glasses.page < totalPage-2 %}<li class="page-item"><a class="page-link">...</a></li>{% endif %}
			  	{% if totalPage > 2 and glasses.page < totalPage %}<li class="page-item"><a class="page-link" onclick="setGetParameter('page','{{totalPage}}')">{{totalPage}}</a></li>{% endif %}
			    {% if glasses.page < totalPage %}<li class="page-item"><a class="page-link" onclick="setGetParameter('page','{{glasses.page + 1}}')">Sonraki</a></li>{% endif %}
			  </ul>
			</nav>
			{% else %}
			<div style="margin-left: 0px !important; margin-right:0px !important;" class="row w-100 pl-5 pr-5 justify-content-center">                  
				<div class="alert alert-secondary mt-5 w-100" role="alert">Gözlük bulunmamaktadır.</div>
			</div>
			{% endif %}	
		</div>
	</div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
	function deleteCookies() {
		var cookies = document.cookie.split("; ");
		for (var c = 0; c < cookies.length; c++) {
			var d = window.location.hostname.split(".");
			while (d.length > 0) {
				var cookieBase = encodeURIComponent(cookies[c].split(";")[0].split("=")[0]) + '=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain=' + d.join('.') + ' ;path=';
				var p = location.pathname.split('/');
				document.cookie = cookieBase + '/';
				while (p.length > 0) {
					document.cookie = cookieBase + p.join('/');
					p.pop();
				};
				d.shift();
			}
		}
		location.reload();
	};
	
	function setGetParameter(paramName, paramValue)
	{
	    var url = window.location.href;
	    var hash = location.hash;
	    url = url.replace(hash, '');
	    if (url.indexOf(paramName + "=") >= 0)
	    {
	        var prefix = url.substring(0, url.indexOf(paramName + "=")); 
	        var suffix = url.substring(url.indexOf(paramName + "="));
	        suffix = suffix.substring(suffix.indexOf("=") + 1);
	        suffix = (suffix.indexOf("&") >= 0) ? suffix.substring(suffix.indexOf("&")) : "";
	        url = prefix + paramName + "=" + paramValue + suffix;
	    }
	    else
	    {
	    if (url.indexOf("?") < 0)
	        url += "?" + paramName + "=" + paramValue;
	    else
	        url += "&" + paramName + "=" + paramValue;
	    }
	    window.location.href = url + hash;
	}

	$('#carousel-example').on('slide.bs.carousel', function (e) {

    var $e = $(e.relatedTarget);
    var idx = $e.index();
    var itemsPerSlide = 5;
    var totalItems = $('.carousel-item').length;
 
    if (idx >= totalItems-(itemsPerSlide-1)) {
        var it = itemsPerSlide - (totalItems - idx);
        for (var i=0; i<it; i++) {
            // append slides to end
            if (e.direction=="left") {
                $('.carousel-item').eq(i).appendTo('.carousel-inner');
            }
            else {
                $('.carousel-item').eq(0).appendTo('.carousel-inner');
            }
        }
    }
});
</script>
</body>
</html>